{% extends "MesdUserBundle:Filter:layout.html.twig" %}

{% block mesd_user_filter_content %}
    <h1>Edit Filter</h1>

    {{ form_start(form) }}
    {{ form_errors(form) }}
    {{ form_label(form.name) }}
    {{ form_widget(form.name, {'attr': {'class': 'form-control'}}) }}
    {{ form_errors(form.name) }}
    {{ form_label(form.filterCategory) }}
    {{ form_widget(form.filterCategory, {'attr': {'class': 'form-control filter-role-dropdown'}}) }}
    {{ form_errors(form.filterCategory) }}
    {{ form_widget(form.solvent) }}
    <div id="solvent">
        {% for filter in filters %}
            {% for solvent in filter['solvent'] %}
                {% if filterCategoryConfig is not null %}
                    <div>
                        {% for entities in filterCategoryConfig['entities'] %}
                            <div>
                                {% for entity in entities %}
                                    <div data-name="{{ entity['name'] }}">
                                        {% for join in entity['joins'] %}
                                            <div data-name="{{ join['name'] }}" data-trail="{{ join['trail'] }}">
                                                <label>{{ join['name'] }}</label>
                                                <select class="no-listener-yet">
                                                    <option></option>
                                                    {% for item in entityLists[join['name']] %}
                                                        <option value="{{ item.id }}">{{ item }}</option>
                                                    {% endfor %}
                                                </select>
                                            </div>
                                        {% endfor %}
                                    </div>
                                {% endfor %}
                            </div>
                        {% endfor %}
                    </div>
                {% endif %}
            {% endfor %}
        {% endfor %}
    </div>
    <div id="afterSolvent"></div>
    {{ form_label(form.create) }}
    {{ form_widget(form.create, {'attr': {'class': 'btn btn-primary'}}) }}
    {{ form_end(form) }}
{% endblock mesd_user_filter_content %}
